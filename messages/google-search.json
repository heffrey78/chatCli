[
  {
    "role": "user",
    "content": "I want to create a new nodejs method. It will call the Google Search API. I want to store the key in my .env file. The method should take a search string and return a list of titles from the Search object. #Here is the api url: GET https://customsearch.googleapis.com/customsearch/v1 #The API key is set via url parameter: key=yourAPIKey"
  },
  {
    "role": "assistant",
    "content": "To achieve this, you need to have Node.js installed along with 'dotenv' and 'axios' packages. If you haven't installed them, first install them using the following commands:\n\n```\nnpm init -y\nnpm install dotenv axios\n```\n\nNext, create a .env file in your project directory and store your API key:\n\n```\nGOOGLE_API_KEY=yourAPIKey\n```\n\nNow, create a JavaScript file (e.g., index.js) and follow these steps:\n\n1. Import the necessary modules.\n2. Load the environment variables from the .env file.\n3. Define your API URL and other necessary information like the CX key.\n4. Create an async function to perform the Google Search API request.\n5. Use Axios to make an HTTP GET request to the API with the search query.\n6. Extract the list of titles from the search result and return them.\n\nHere's the complete code for your index.js file:\n\n```javascript\n// Import necessary modules\nconst dotenv = require('dotenv');\nconst axios = require('axios');\n\n// Load the environment variables from the .env file\ndotenv.config();\n\n// Define your API URL and other necessary information\nconst GOOGLE_API_KEY = process.env.GOOGLE_API_KEY;\nconst CUSTOM_SEARCH_CX = 'yourCustomSearchEngineCX';  // Replace this with your Custom Search Engine CX\nconst GOOGLE_API_URL = 'https://customsearch.googleapis.com/customsearch/v1';\n\n// Create an async function for fetching search results and extracting the titles\nasync function searchAndGetTitles(searchText) {\n  try {\n    // Make an HTTP GET request to the Google Search API\n    const response = await axios.get(GOOGLE_API_URL, {\n      params: {\n        key: GOOGLE_API_KEY,\n        cx: CUSTOM_SEARCH_CX,\n        q: searchText,\n      },\n    });\n\n    // Extract the list of titles from the search results\n    const searchResults = response.data.items;\n    const titles = searchResults.map(result => result.title);\n\n    // Return the list of titles\n    return titles;\n  } catch (error) {\n    console.error(`Error fetching search results: ${error}`);\n  }\n}\n\n// Test the function with a search string and print the list of titles\nsearchAndGetTitles('Node.js')\n  .then(titles => console.log(titles))\n  .catch(err => console.error(err));\n```\n\nReplace `yourCustomSearchEngineCX` with your Custom Search Engine CX. Run your node.js file and you should see a list of titles related to the search string \"Node.js\"."
  }
]